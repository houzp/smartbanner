"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),defaults={icon:null,title:null,author:null,appStore:null,marketUrl:null,schemeIOS:null,schemeAndroid:null,intentUrl:null,button:"OPEN",rank:"★★★★★"},agent=navigator.userAgent,Platform={isAndroid:/Android/i.test(agent),isIOS:/iPhone|iPad|iPod/i.test(agent)},Browser={isSafari:/Safari/i.test(agent)&&!/Chrome/i.test(agent),isChrome:/Chrome/i.test(agent),isOpera:/Opera/i.test(agent),isWechat:/MicroMessenger/i.test(agent)},Smartbanner=function(){function e(n){_classCallCheck(this,e),this.options=Object.assign(n),this.init()}return _createClass(e,[{key:"init",value:function(){Browser.isWechat||Browser.isSafari||(Platform.isAndroid||Platform.isIOS)&&(this.sb=this.create())}},{key:"create",value:function(){var e=this.options,n=document.createElement("div");return n.setAttribute("id","js-smartbanner"),n.setAttribute("class","smartbanner hide"),n.innerHTML='<div class="sb-container">\n                          <span id="js-close" class="sb-close">×</span>\n                          <img src="'+e.icon+'" class="sb-icon" />\n                          <div class="sb-info">\n                            <p>'+e.title+"</p>\n                            <p>"+e.author+'</p>\n                            <p class="rank">'+e.rank+'</p>\n                          </div>\n                          <a id="js-open" class="sb-button">\n                            <span>'+e.button+"</span>\n                          </a>\n                        </div>",document.body.appendChild(n),n}},{key:"show",value:function(){var e=this.sb.className.replace("hide","show");this.sb.className=e}},{key:"hide",value:function(){var e=this.sb.className.replace("show","hide");this.sb.className=e}},{key:"close",value:function(){this.hide()}},{key:"open",value:function(){this["try"](),this.hide()}},{key:"listen",value:function(){var e=this,n=document.getElementById("js-close"),t=document.getElementById("js-open");n.onclick=function(){return e.close()},t.onclick=function(){return e.open()}}},{key:"try",value:function(){var e=this;if(Platform.isAndroid){var n=agent.match(/Chrome\/(\d+)/);25<=(n&&n[1])?window.location=this.options.intentUrl:!function(){var n=document.createElement("iframe");n.style.display="none",n.src=e.options.schemeAndroid,document.body.appendChild(n);var t=new Date;setTimeout(function(){600>new Date-t&&(window.location=e.options.marketUrl)},400)}()}else Platform.isIOS&&(window.location=this.options.schemeIOS,setTimeout(function(){window.location=e.options.appStore},250))}}]),e}();window.Smartbanner=Smartbanner;